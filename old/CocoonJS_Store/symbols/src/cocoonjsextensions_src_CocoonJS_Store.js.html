<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>  2</span> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>  3</span> </span><span class="WHIT">    </span><span class="COMM">// The CocoonJS must exist before creating the extension.</span><span class="WHIT">
<span class='line'>  4</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">window.CocoonJS</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'undefined'</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">window.CocoonJS</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="STRN">"The CocoonJS object must exist and be valid before creating any extension object."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  5</span> 
<span class='line'>  6</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>  7</span>     * This namespace represents the CocoonJS In-App Purchase extension.
<span class='line'>  8</span>     * @namespace
<span class='line'>  9</span>     */</span><span class="WHIT">
<span class='line'> 10</span> </span><span class="WHIT">    </span><span class="NAME">CocoonJS.Store</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 11</span> 
<span class='line'> 12</span> </span><span class="WHIT">    </span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">CocoonJS.nativeExtensionObjectAvailable</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">window.ext.IDTK_SRV_STORE</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="STRN">'undefined'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 13</span> 
<span class='line'> 14</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'> 15</span> 	* The data structure that represents the information of a product in the store.
<span class='line'> 16</span> 	* @namespace
<span class='line'> 17</span> 	* @constructor
<span class='line'> 18</span> 	* @param {string} The id of the product.
<span class='line'> 19</span> 	* @param {string} The alias of the product.
<span class='line'> 20</span> 	* @param {CocoonJS.Store.ProductType} The product type @see CocoonJS.Store.ProductType.
<span class='line'> 21</span> 	* @param {string} The title of the product.
<span class='line'> 22</span> 	* @param {string} The description of the product.
<span class='line'> 23</span> 	* @param {string} The localized price of the product.
<span class='line'> 24</span> 	* @param {string} The URL of the asset to be downloaded for this purchase.
<span class='line'> 25</span> 	*/</span><span class="WHIT">
<span class='line'> 26</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.ProductInfo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">productAlias</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">productId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">productType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">title</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">description</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">price</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">localizedPrice</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">downloadURL</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 27</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 28</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 29</span> 		* The id of the product.
<span class='line'> 30</span> 		* @field
<span class='line'> 31</span> 		* @type string
<span class='line'> 32</span> 		*/</span><span class="WHIT">
<span class='line'> 33</span> </span><span class="WHIT">		</span><span class="NAME">this.productId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">productId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 34</span> 
<span class='line'> 35</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 36</span> 		* The alias of the product.
<span class='line'> 37</span> 		* @field
<span class='line'> 38</span> 		* @type string
<span class='line'> 39</span> 		*/</span><span class="WHIT">
<span class='line'> 40</span> </span><span class="WHIT">		</span><span class="NAME">this.productAlias</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">productAlias</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 41</span> 
<span class='line'> 42</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 43</span> 		* The product type @see CocoonJS.Store.ProductType
<span class='line'> 44</span> 		* @field
<span class='line'> 45</span> 		* @type CocoonJS.Store.ProductType
<span class='line'> 46</span> 		*/</span><span class="WHIT">
<span class='line'> 47</span> </span><span class="WHIT">		</span><span class="NAME">this.productType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">productType</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 48</span> 
<span class='line'> 49</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 50</span> 		* The title of the product.
<span class='line'> 51</span> 		* @field
<span class='line'> 52</span> 		* @type string
<span class='line'> 53</span> 		*/</span><span class="WHIT">
<span class='line'> 54</span> </span><span class="WHIT">		</span><span class="NAME">this.title</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">title</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 55</span> 
<span class='line'> 56</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 57</span> 		* The description of the product.
<span class='line'> 58</span> 		* @field
<span class='line'> 59</span> 		* @type string
<span class='line'> 60</span> 		*/</span><span class="WHIT">
<span class='line'> 61</span> </span><span class="WHIT">		</span><span class="NAME">this.description</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">description</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 62</span> 
<span class='line'> 63</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 64</span> 		* The price of the product.
<span class='line'> 65</span> 		* @field
<span class='line'> 66</span> 		* @type string
<span class='line'> 67</span> 		*/</span><span class="WHIT">
<span class='line'> 68</span> </span><span class="WHIT">		</span><span class="NAME">this.price</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">price</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 69</span> 
<span class='line'> 70</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 71</span> 		* The localized price of the product.
<span class='line'> 72</span> 		* @field
<span class='line'> 73</span> 		* @type string
<span class='line'> 74</span> 		*/</span><span class="WHIT">
<span class='line'> 75</span> </span><span class="WHIT">		</span><span class="NAME">this.localizedPrice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">localizedPrice</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 76</span> 
<span class='line'> 77</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 78</span> 		* The URL of the asset to be downloaded for this purchase.
<span class='line'> 79</span> 		* @field
<span class='line'> 80</span> 		* @type string
<span class='line'> 81</span> 		*/</span><span class="WHIT">
<span class='line'> 82</span> </span><span class="WHIT">		</span><span class="NAME">this.downloadURL</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">downloadURL</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 83</span> 
<span class='line'> 84</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 85</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 86</span> 
<span class='line'> 87</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'> 88</span>     * The predefined possible states of a purchase.
<span class='line'> 89</span>     * @namespace 
<span class='line'> 90</span>     */</span><span class="WHIT">
<span class='line'> 91</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.ProductType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> 
<span class='line'> 92</span> 	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 93</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 94</span> 		* A consumable product. See platform documentation for further information.
<span class='line'> 95</span> 		*/</span><span class="WHIT">
<span class='line'> 96</span> </span><span class="WHIT">	    </span><span class="NAME">CONSUMABLE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 97</span> 
<span class='line'> 98</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'> 99</span> 		* A non-cunsumable product. . See platform documentation for further information.
<span class='line'>100</span> 		*/</span><span class="WHIT">
<span class='line'>101</span> </span><span class="WHIT">	    </span><span class="NAME">NON_CONSUMABLE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>102</span> 
<span class='line'>103</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>104</span> 		* An auto-renewable subscription. See platform documentation for further information.
<span class='line'>105</span> 		*/</span><span class="WHIT">
<span class='line'>106</span> </span><span class="WHIT">	    </span><span class="NAME">AUTO_RENEWABLE_SUBSCRIPTION</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>107</span> 
<span class='line'>108</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>109</span> 		* A free subscription. See platform documentation for further information.
<span class='line'>110</span> 		*/</span><span class="WHIT">
<span class='line'>111</span> </span><span class="WHIT">	    </span><span class="NAME">FREE_SUBSCRIPTION</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>112</span> 
<span class='line'>113</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>114</span> 		* A non-renewable subscription. See platform documentation for further information.
<span class='line'>115</span> 		*/</span><span class="WHIT">
<span class='line'>116</span> </span><span class="WHIT">	    </span><span class="NAME">NON_RENEWABLE_SUBSCRIPTION</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="WHIT">
<span class='line'>117</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>118</span> 
<span class='line'>119</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>120</span>     * The predefined possible store types.
<span class='line'>121</span>     * @namespace 
<span class='line'>122</span>     */</span><span class="WHIT">
<span class='line'>123</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.StoreType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> 
<span class='line'>124</span> 	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>125</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>126</span> 		* Apple AppStore
<span class='line'>127</span> 		*/</span><span class="WHIT">
<span class='line'>128</span> </span><span class="WHIT">	    </span><span class="NAME">APP_STORE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>129</span> 
<span class='line'>130</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>131</span> 	    * Android Play Store
<span class='line'>132</span> 	    */</span><span class="WHIT">
<span class='line'>133</span> </span><span class="WHIT">	    </span><span class="NAME">PLAY_STORE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>134</span> 
<span class='line'>135</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>136</span> 		* Mock Store
<span class='line'>137</span> 		*/</span><span class="WHIT">
<span class='line'>138</span> </span><span class="WHIT">		</span><span class="NAME">MOCK_STORE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>139</span> 
<span class='line'>140</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>141</span> 	    * Amazon AppStore
<span class='line'>142</span> 	    */</span><span class="WHIT">
<span class='line'>143</span> </span><span class="WHIT">	    </span><span class="NAME">CHROME_STORE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>144</span> 
<span class='line'>145</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>146</span> 	    * Amazon AppStore
<span class='line'>147</span> 	    */</span><span class="WHIT">
<span class='line'>148</span> </span><span class="WHIT">	    </span><span class="NAME">AMAZON_STORE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>149</span> 
<span class='line'>150</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>151</span> 	    * Nook Store
<span class='line'>152</span> 	    */</span><span class="WHIT">
<span class='line'>153</span> </span><span class="WHIT">	    </span><span class="NAME">NOOK_STORE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="WHIT">
<span class='line'>154</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>155</span> 
<span class='line'>156</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>157</span> 	* The data structure that represents the information of a purchase.
<span class='line'>158</span> 	* @namespace
<span class='line'>159</span> 	* @constructor
<span class='line'>160</span> 	* @param {string} The transaction id of a purchase.
<span class='line'>161</span> 	* @param {string} The time when the purchase was done in seconds since 1970.
<span class='line'>162</span> 	* @param {CocoonJS.Store.PurchaseState} The state of the purchase. @see CocoonJS.Store.PurchaseState
<span class='line'>163</span> 	* @param {string} The product id related to this purchase.
<span class='line'>164</span> 	* @param {number} The number of products of the productId kind purchased in this transaction.
<span class='line'>165</span> 	*/</span><span class="WHIT">
<span class='line'>166</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.PurchaseInfo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">transactionId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">purchaseTime</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">purchaseState</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">productId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">quantity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>167</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>168</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>169</span> 		* The transaction id of a purchase.
<span class='line'>170</span> 		* @field
<span class='line'>171</span> 		* @type string
<span class='line'>172</span> 		*/</span><span class="WHIT">
<span class='line'>173</span> </span><span class="WHIT">		</span><span class="NAME">this.transactionId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">transactionId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>174</span> 
<span class='line'>175</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>176</span> 		* The time when the purchase was done in seconds since 1970.
<span class='line'>177</span> 		* @field
<span class='line'>178</span> 		* @type string
<span class='line'>179</span> 		*/</span><span class="WHIT">
<span class='line'>180</span> </span><span class="WHIT">		</span><span class="NAME">this.purchaseTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">purchaseTime</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>181</span> 
<span class='line'>182</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>183</span> 		* The state of the purchase. @see CocoonJS.Store.PurchaseState
<span class='line'>184</span> 		* @field
<span class='line'>185</span> 		* @type CocoonJS.Store.PurchaseState
<span class='line'>186</span> 		*/</span><span class="WHIT">
<span class='line'>187</span> </span><span class="WHIT">		</span><span class="NAME">this.purchaseState</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">purchaseState</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>188</span> 
<span class='line'>189</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>190</span> 		* The product id related to this purchase.
<span class='line'>191</span> 		* @field
<span class='line'>192</span> 		* @type string
<span class='line'>193</span> 		*/</span><span class="WHIT">
<span class='line'>194</span> </span><span class="WHIT">		</span><span class="NAME">this.productId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">productId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>195</span> 
<span class='line'>196</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>197</span> 		* The number of products of the productId kind purchased in this transaction.
<span class='line'>198</span> 		* @field
<span class='line'>199</span> 		* @type number
<span class='line'>200</span> 		*/</span><span class="WHIT">
<span class='line'>201</span> </span><span class="WHIT">		</span><span class="NAME">this.quantity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">quantity</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>202</span> 
<span class='line'>203</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>204</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>205</span> 
<span class='line'>206</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>207</span>     * The predefined possible states of a purchase.
<span class='line'>208</span>     * @namespace 
<span class='line'>209</span>     */</span><span class="WHIT">
<span class='line'>210</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.PurchaseState</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> 
<span class='line'>211</span> 	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>212</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>213</span> 		* The product has been successfully purchased. The transaction has ended successfully.
<span class='line'>214</span> 		*/</span><span class="WHIT">
<span class='line'>215</span> </span><span class="WHIT">	    </span><span class="NAME">PURCHASED</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>216</span> 
<span class='line'>217</span> </span><span class="WHIT">		</span><span class="COMM">/**
<span class='line'>218</span> 		* The purchase has been canceled.
<span class='line'>219</span> 		*/</span><span class="WHIT">
<span class='line'>220</span> </span><span class="WHIT">	    </span><span class="NAME">CANCELED</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>221</span> 
<span class='line'>222</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>223</span> 		* The purchase has been refunded.
<span class='line'>224</span> 		*/</span><span class="WHIT">
<span class='line'>225</span> </span><span class="WHIT">	    </span><span class="NAME">REFUNDED</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>226</span> 
<span class='line'>227</span> </span><span class="WHIT">	    </span><span class="COMM">/**
<span class='line'>228</span> 		* The purchase (subscriptions only) has expired and is no longer valid.
<span class='line'>229</span> 		*/</span><span class="WHIT">
<span class='line'>230</span> </span><span class="WHIT">	    </span><span class="NAME">EXPIRED</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="WHIT">
<span class='line'>231</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>232</span> 
<span class='line'>233</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>234</span> 	* Gets the name of the native store implementation. 
<span class='line'>235</span> 	* @return {CocoonJS.Store.StoreType} The store type
<span class='line'>236</span> 	* @function
<span class='line'>237</span> 	*/</span><span class="WHIT"> 
<span class='line'>238</span> 	</span><span class="NAME">CocoonJS.Store.getStoreType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>239</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>240</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>241</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>242</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"getStoreType"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>243</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>244</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>245</span> 
<span class='line'>246</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>247</span> 	* Initialize the service with service level initialization parameters.
<span class='line'>248</span> 	* @function
<span class='line'>249</span> 	* @param {object} An object with the required initialization parameters for the service.
<span class='line'>250</span> 	*/</span><span class="WHIT">
<span class='line'>251</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.requestInitialization</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parameters</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>252</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>253</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">parameters</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="WHIT"> 
<span class='line'>254</span>         </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>255</span> </span><span class="WHIT">            </span><span class="NAME">parameters</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>256</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>257</span> </span><span class="WHIT">        </span><span class="KEYW">else</span><span class="WHIT">
<span class='line'>258</span> </span><span class="WHIT">        </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>259</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parameters</span><span class="PUNC">[</span><span class="STRN">'managed'</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">parameters</span><span class="PUNC">[</span><span class="STRN">'remote'</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parameters</span><span class="PUNC">[</span><span class="STRN">'managed'</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>260</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parameters</span><span class="PUNC">[</span><span class="STRN">'sandbox'</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">parameters</span><span class="PUNC">[</span><span class="STRN">'debug'</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parameters</span><span class="PUNC">[</span><span class="STRN">'sandbox'</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>261</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>262</span> 
<span class='line'>263</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>264</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>265</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"requestInitialization"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>266</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>267</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>268</span> 
<span class='line'>269</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>270</span> 	* Starts the Store Service. 
<span class='line'>271</span> 	* This will make the system to initialize the Store Service and probably Store callbacks will start to be received after calling this method so you should have set your event handler before calling this method so don't lose any callback.
<span class='line'>272</span> 	* @function
<span class='line'>273</span> 	*/</span><span class="WHIT"> 
<span class='line'>274</span> 	</span><span class="NAME">CocoonJS.Store.start</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>275</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>276</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>277</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>278</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"start"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>279</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>280</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>281</span> 
<span class='line'>282</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>283</span> 	* This method allows you to check is the  Store service is available in this platform. 
<span class='line'>284</span> 	* Not all iOS and Android devices will have the Store service available so you should check if it is before calling any other method.
<span class='line'>285</span> 	* @function
<span class='line'>286</span> 	* @return {boolean} True if the service is available and false otherwise.
<span class='line'>287</span> 	*/</span><span class="WHIT"> 
<span class='line'>288</span> 	</span><span class="NAME">CocoonJS.Store.canPurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>289</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>290</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>291</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>292</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"canPurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>293</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>294</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>295</span> 
<span class='line'>296</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>297</span> 	* Fetches the products from the CocoonJS Cloud Compiling service store configuration. 
<span class='line'>298</span> 	* The request is monitored using the {@link CocoonJS.Store.onProductsFetchStarted}, {@link CocoonJS.Store.onProductsFetchCompleted} and {@link CocoonJS.Store.onProductsFetchFailed} event handlers.
<span class='line'>299</span> 	* @deprecated You should now use fetchProductsFromStore. We don't support cloud products now.
<span class='line'>300</span> 	* @function
<span class='line'>301</span> 	* @see CocoonJS.Store.onProductsFetchStarted
<span class='line'>302</span> 	* @see CocoonJS.Store.onProductsFetchCompleted
<span class='line'>303</span> 	* @see CocoonJS.Store.onProductsFetchFailed
<span class='line'>304</span> 	*/</span><span class="WHIT"> 
<span class='line'>305</span> 	</span><span class="NAME">CocoonJS.Store.fetchProductsFromServer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>306</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>307</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>308</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>309</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"fetchProductsFromServer"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>310</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>311</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>312</span> 
<span class='line'>313</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>314</span> 	* Fetches the products information from the Store. 
<span class='line'>315</span> 	* The request is monitored using the {@link CocoonJS.Store.onProductsFetchStarted}, {@link CocoonJS.Store.onProductsFetchCompleted} and {@link CocoonJS.Store.onProductsFetchFailed} event handlers.
<span class='line'>316</span> 	* @function
<span class='line'>317</span> 	* @param {array} productIds An array with the ids of the products to retrieve information from.
<span class='line'>318</span> 	* @see CocoonJS.Store.onProductsFetchStarted
<span class='line'>319</span> 	* @see CocoonJS.Store.onProductsFetchCompleted
<span class='line'>320</span> 	* @see CocoonJS.Store.onProductsFetchFailed
<span class='line'>321</span> 	*/</span><span class="WHIT"> 
<span class='line'>322</span> 	</span><span class="NAME">CocoonJS.Store.fetchProductsFromStore</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">productIds</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>323</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>324</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>325</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>326</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"fetchProductsFromStore"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>327</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>328</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>329</span> 
<span class='line'>330</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>331</span> 	* Finish a purchase transaction and removes the transaction from the transaction queue. 
<span class='line'>332</span> 	* This method must be called after a purchase finishes successfully and the  {@link CocoonJS.Store.onProductPurchaseCompleted} callback has been received. 
<span class='line'>333</span> 	* If the purchase includes some asset to download from an external server this method must be called after the asset has been successfully downloaded. 
<span class='line'>334</span> 	* If you do not finish the transaction because the asset has not been correctly downloaded the {@link CocoonJS.Store.onProductPurchaseStarted} method will be called again later on.
<span class='line'>335</span> 	* @function
<span class='line'>336</span> 	* @param {string} transactionId The transactionId of the purchase to finish.
<span class='line'>337</span> 	*/</span><span class="WHIT"> 
<span class='line'>338</span> 	</span><span class="NAME">CocoonJS.Store.finishPurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">transactionId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>339</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>340</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>341</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>342</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"finishPurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>343</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>344</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>345</span> 
<span class='line'>346</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>347</span> 	* Consumes a purchase. This makes that product to be purchasable again. 
<span class='line'>348</span> 	* @function
<span class='line'>349</span> 	* @param {string} transactionId The transaction Id of the purchase to consume.
<span class='line'>350</span> 	* @param {string} productId The product Id of the product to be consumed.
<span class='line'>351</span> 	*/</span><span class="WHIT"> 
<span class='line'>352</span> 	</span><span class="NAME">CocoonJS.Store.consumePurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">transactionId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">productId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>353</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>354</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>355</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>356</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"consumePurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>357</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>358</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>359</span> 
<span class='line'>360</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>361</span> 	* Request a product purchase given it's product id. 
<span class='line'>362</span> 	* The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
<span class='line'>363</span> 	* @function
<span class='line'>364</span> 	* @param {string} productId The id or alias of the product to be purchased.
<span class='line'>365</span> 	* @see CocoonJS.Store.onProductPurchaseStarted
<span class='line'>366</span> 	* @see CocoonJS.Store.onProductPurchaseCompleted
<span class='line'>367</span> 	* @see CocoonJS.Store.onProductPurchaseFailed
<span class='line'>368</span> 	*/</span><span class="WHIT"> 
<span class='line'>369</span> 	</span><span class="NAME">CocoonJS.Store.purchaseProduct</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">productId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>370</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>371</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>372</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>373</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"purchaseFeature"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>374</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>375</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>376</span> 
<span class='line'>377</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>378</span> 	* Request a product purchase given it's product id showing a modal progress dialog. 
<span class='line'>379</span> 	* The request is monitored using the {@link CocoonJS.Store.onProductPurchaseStarted}, {@link CocoonJS.Store.onProductPurchaseCompleted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
<span class='line'>380</span> 	* @function
<span class='line'>381</span> 	* @param {string} productId The id or alias of the product to be purchased.
<span class='line'>382</span> 	* @see CocoonJS.Store.onProductPurchaseStarted
<span class='line'>383</span> 	* @see CocoonJS.Store.onProductPurchaseCompleted
<span class='line'>384</span> 	* @see CocoonJS.Store.onProductPurchaseFailed
<span class='line'>385</span> 	*/</span><span class="WHIT"> 
<span class='line'>386</span> 	</span><span class="NAME">CocoonJS.Store.puchaseProductModal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">productId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>387</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>388</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>389</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>390</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"purchaseFeatureModal"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>391</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>392</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>393</span> 
<span class='line'>394</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>395</span> 	* Request the purchase of a product given it's product id showing a dialog with a preview of the product (title and description). 
<span class='line'>396</span> 	* The request is monitored using the {@link CocoonJS.Store.onProductPurchaseStarted}, {@link CocoonJS.Store.onProductPurchaseCompleted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
<span class='line'>397</span> 	* @function
<span class='line'>398</span> 	* @param {string} productId The id or alias of the product to be purchased.
<span class='line'>399</span> 	* @see CocoonJS.Store.onProductPurchaseStarted
<span class='line'>400</span> 	* @see CocoonJS.Store.onProductPurchaseCompleted
<span class='line'>401</span> 	* @see CocoonJS.Store.onProductPurchaseFailed
<span class='line'>402</span> 	*/</span><span class="WHIT"> 
<span class='line'>403</span> 	</span><span class="NAME">CocoonJS.Store.purchaseProductModalWithPreview</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">productId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>404</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>405</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>406</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>407</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"purchaseFeatureModalWithPreview"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>408</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>409</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>410</span> 
<span class='line'>411</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>412</span> 	* Returns if a product has been already purchased or not. 
<span class='line'>413</span> 	* @function
<span class='line'>414</span> 	* @param {string} productId The product id or alias of the product to be checked.
<span class='line'>415</span> 	* @returns {boolean} A flag that indicates whether the product has been already purchased (true) or not (false).
<span class='line'>416</span> 	*/</span><span class="WHIT">
<span class='line'>417</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.isProductPurchased</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">productId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>418</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>419</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>420</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>421</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"isFeaturePurchased"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>422</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>423</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>424</span> 
<span class='line'>425</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>426</span> 	* Restores all the purchases from the platform's market. 
<span class='line'>427</span> 	* For each already purchased product {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onPurchaseProductCompleted} and {@link CocoonJS.Store.onPurchaseProductFailed} event handlers are called again
<span class='line'>428</span> 	* @function
<span class='line'>429</span> 	* @see CocoonJS.Store.onRestorePurchasesStarted
<span class='line'>430</span> 	* @see CocoonJS.Store.onRestorePurchasesCompleted
<span class='line'>431</span> 	* @see CocoonJS.Store.onRestorePurchasesFailed
<span class='line'>432</span> 	*/</span><span class="WHIT">
<span class='line'>433</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.restorePurchases</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>434</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>435</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>436</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>437</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"restorePurchases"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>438</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>439</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>440</span> 
<span class='line'>441</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>442</span> 	* Restores all the purchases from the platform's market showing a modal progress dialog. 
<span class='line'>443</span> 	* For each already purchased product {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onPurchaseProductCompleted} and {@link CocoonJS.Store.onPurchaseProductFailed} event handlers are called again
<span class='line'>444</span> 	* @function
<span class='line'>445</span> 	* @see CocoonJS.Store.onRestorePurchasesStarted
<span class='line'>446</span> 	* @see CocoonJS.Store.onRestorePurchasesCompleted
<span class='line'>447</span> 	* @see CocoonJS.Store.onRestorePurchasesFailed
<span class='line'>448</span> 	*/</span><span class="WHIT">
<span class='line'>449</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.restorePurchasesModal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>450</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>451</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>452</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>453</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"restorePurchasesModal"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>454</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>455</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>456</span> 
<span class='line'>457</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>458</span> 	* Returns all the products available to be purchased.
<span class='line'>459</span> 	* @function
<span class='line'>460</span> 	* @returns {array} An array with  all the {@link CocoonJS.Store.ProductInfo} objects available for purchase.
<span class='line'>461</span> 	*/</span><span class="WHIT">
<span class='line'>462</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.getProducts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>463</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>464</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>465</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>466</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"getProducts"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>467</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>468</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>469</span> 
<span class='line'>470</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>471</span> 	* Adds a product to the products local DB. 
<span class='line'>472</span> 	* @function
<span class='line'>473</span> 	* @param {CocoonJS.Store.ProductInfo} product The product to be added to the local products DB.
<span class='line'>474</span> 	*/</span><span class="WHIT">
<span class='line'>475</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.addProduct</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">product</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>476</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>477</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>478</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>479</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"addProduct"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>480</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>481</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>482</span> 
<span class='line'>483</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>484</span> 	* Removes a product from the products local DB given its productId. 
<span class='line'>485</span> 	* @function
<span class='line'>486</span> 	* @param {string} productId The product or alias of the product to be removed from the local products DB.
<span class='line'>487</span> 	*/</span><span class="WHIT">
<span class='line'>488</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.removeProduct</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">productId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>489</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>490</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>491</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>492</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"removeProduct"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>493</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>494</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>495</span> 
<span class='line'>496</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>497</span> 	* Returns all the locally stored purchases.
<span class='line'>498</span> 	* @function
<span class='line'>499</span> 	* @returns {array} An array with all the {@link CocoonJS.Store.PurchaseInfo} completed purchases.
<span class='line'>500</span> 	*/</span><span class="WHIT">
<span class='line'>501</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.getPurchases</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>502</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>503</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>504</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>505</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"getPurchases"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>506</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>507</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>508</span> 
<span class='line'>509</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>510</span> 	* Adds a purchase to the local purchases DB. 
<span class='line'>511</span> 	* @function
<span class='line'>512</span> 	* @param {CocoonJS.Store.StorePurchase} purchase The purchase to be added.
<span class='line'>513</span> 	*/</span><span class="WHIT"> 
<span class='line'>514</span> 	</span><span class="NAME">CocoonJS.Store.addPurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">purchase</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>515</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>516</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>517</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>518</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"addPurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>519</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>520</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>521</span> 
<span class='line'>522</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>523</span> 	* Removes a purchase from the local purchases DB given it's transaction id. 
<span class='line'>524</span> 	* @function
<span class='line'>525</span> 	* @param {string} transactionId The id of the transaction to be removed.
<span class='line'>526</span> 	*/</span><span class="WHIT"> 
<span class='line'>527</span> 	</span><span class="NAME">CocoonJS.Store.removePurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">transactionId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>528</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>529</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>530</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>531</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"removePurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>532</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>533</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>534</span> 
<span class='line'>535</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>536</span> 	* (TESTING ONLY) Simulate a purchase cancel. 
<span class='line'>537</span> 	* This method is not allowed in production services and will only work in Mocks. 
<span class='line'>538</span> 	* The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
<span class='line'>539</span> 	* @function
<span class='line'>540</span> 	* @param {string} transactionId The transactionId of the purchase to be canceled.
<span class='line'>541</span> 	*/</span><span class="WHIT">
<span class='line'>542</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.cancelPurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">transactionId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>543</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>544</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>545</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>546</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"cancelPurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>547</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>548</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>549</span> 
<span class='line'>550</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>551</span> 	* (TESTING ONLY) Simulate a purchase refundment. 
<span class='line'>552</span> 	* This method is not allowed in production services and will only work in Mocks. 
<span class='line'>553</span> 	* The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
<span class='line'>554</span> 	* @function
<span class='line'>555</span> 	* @param {string} transactionId The transactionId of the purchase to be refunded.
<span class='line'>556</span> 	*/</span><span class="WHIT">
<span class='line'>557</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.refundPurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">transactionId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>558</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>559</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>560</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>561</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"refundPurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>562</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>563</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>564</span> 
<span class='line'>565</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>566</span> 	* (TESTING ONLY) Simulate a purchase expiration. 
<span class='line'>567</span> 	* This method is not allowed in production services and will only work in Mocks. 
<span class='line'>568</span> 	* The request is monitored using the {@link CocoonJS.Store.onPurchaseProductStarted}, {@link CocoonJS.Store.onProductPurchaseStarted} and {@link CocoonJS.Store.onProductPurchaseFailed} event handlers.
<span class='line'>569</span> 	* @function
<span class='line'>570</span> 	* @param {string} transactionId The transactionId of the purchase to be expired.
<span class='line'>571</span> 	*/</span><span class="WHIT">
<span class='line'>572</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.expirePurchase</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">transactionId</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>573</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>574</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">CocoonJS.Store.nativeExtensionObjectAvailable</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>575</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>576</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">CocoonJS.makeNativeExtensionObjectFunctionCall</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"expirePurchase"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>577</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>578</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>579</span> 
<span class='line'>580</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>581</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the products fetch has started.
<span class='line'>582</span>     * The callback function receives no parameters.
<span class='line'>583</span>     * @static
<span class='line'>584</span>     * @event
<span class='line'>585</span>     */</span><span class="WHIT">
<span class='line'>586</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onProductsFetchStarted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onProductsFetchStarted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>587</span> 
<span class='line'>588</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>589</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the products fetch has completed.
<span class='line'>590</span>     * The callback function receives a parameter with an the valid products array.
<span class='line'>591</span>     * @static
<span class='line'>592</span>     * @event
<span class='line'>593</span>     * @param {array} validProducts An array of {@link CocoonJS.Store.ProductInfo} objects representing all the valid fetched products.
<span class='line'>594</span>     */</span><span class="WHIT">
<span class='line'>595</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onProductsFetchCompleted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onProductsFetchCompleted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>596</span> 
<span class='line'>597</span>     </span><span class="COMM">/**
<span class='line'>598</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the products fetch has failed.
<span class='line'>599</span>     * The callback function receives an error message as a parameter.
<span class='line'>600</span>     * @static
<span class='line'>601</span>     * @event
<span class='line'>602</span>     * @param {string} errorMessage The error message.
<span class='line'>603</span>     */</span><span class="WHIT">
<span class='line'>604</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onProductsFetchFailed</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onProductsFetchFailed"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>605</span> 
<span class='line'>606</span>     </span><span class="COMM">/**
<span class='line'>607</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the purchase of a product starts.
<span class='line'>608</span>     * The callback function receives a parameters with the information of the purchased product @see CocoonJS.Store.ProductInfo.
<span class='line'>609</span>     * @static
<span class='line'>610</span> 	* @event
<span class='line'>611</span>     * @param {string} productId The product id of the product being purchased.
<span class='line'>612</span>     */</span><span class="WHIT">
<span class='line'>613</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onProductPurchaseStarted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onProductPurchaseStarted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>614</span> 
<span class='line'>615</span> 	</span><span class="COMM">/**
<span class='line'>616</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when a request for purchase verification has been received from the Store.
<span class='line'>617</span>     * The callback function receives two parameters, one with the productId of the purchased product and another one with a JSON object containing the data to be verified.
<span class='line'>618</span>     * In Andorid this JSON object will containt two keys: signedData and signature. You will need that information to verify the purchase against the backend server.
<span class='line'>619</span>     * @static
<span class='line'>620</span>     * @event
<span class='line'>621</span>     * @param {string} productId The product id of the product to be verified.
<span class='line'>622</span>     * @param {string} data The string with the data to be verified.
<span class='line'>623</span>     */</span><span class="WHIT">
<span class='line'>624</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onProductPurchaseVerificationRequestReceived</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onProductPurchaseVerificationRequestReceived"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>625</span> 
<span class='line'>626</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>627</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the purchase of a product succeeds.
<span class='line'>628</span>     * The callback function receives as parameter the information of the purchase {@see CocoonJS.Store.PurchaseInfo}.
<span class='line'>629</span>     * @static
<span class='line'>630</span>     * @event
<span class='line'>631</span>     * @param {CocoonJS.Store.PurchaseInfo} purchaseInfo The purchase info.
<span class='line'>632</span>     */</span><span class="WHIT">
<span class='line'>633</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onProductPurchaseCompleted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onProductPurchaseCompleted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>634</span> 
<span class='line'>635</span>     </span><span class="COMM">/**
<span class='line'>636</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the purchase of a product fails.
<span class='line'>637</span>     * The callback function receives a parameters with the product id and an error message.
<span class='line'>638</span>     * @static
<span class='line'>639</span>     * @event
<span class='line'>640</span>     * @param {string} productId The product id.
<span class='line'>641</span>     * @param {string} msg The error message.
<span class='line'>642</span>     */</span><span class="WHIT">
<span class='line'>643</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onProductPurchaseFailed</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onProductPurchaseFailed"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>644</span> 
<span class='line'>645</span>     </span><span class="COMM">/**
<span class='line'>646</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the restore purchases operation has started.
<span class='line'>647</span>     * The callback function receives no parameters.
<span class='line'>648</span>     * @static
<span class='line'>649</span>     * @event
<span class='line'>650</span>     */</span><span class="WHIT">
<span class='line'>651</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onRestorePurchasesStarted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onRestorePurchasesStarted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>652</span> 
<span class='line'>653</span>     </span><span class="COMM">/**
<span class='line'>654</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the restore purchases operation has completed.
<span class='line'>655</span>     * The callback function receives no parameters.
<span class='line'>656</span>     * @static
<span class='line'>657</span>     * @event
<span class='line'>658</span>     */</span><span class="WHIT">
<span class='line'>659</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onRestorePurchasesCompleted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onRestorePurchasesCompleted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>660</span> 
<span class='line'>661</span> 	</span><span class="COMM">/**
<span class='line'>662</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the restore purchases operation has failed.
<span class='line'>663</span>     * The callback function receives an error message as a parameter.
<span class='line'>664</span>     * @static
<span class='line'>665</span>     * @event
<span class='line'>666</span>     * @param {string} errorMessage The error message.
<span class='line'>667</span>     */</span><span class="WHIT">
<span class='line'>668</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onRestorePurchasesFailed</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onRestorePurchasesFailed"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>669</span> 
<span class='line'>670</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>671</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the consume purchase operation has started.
<span class='line'>672</span>     * @static
<span class='line'>673</span>     * @event
<span class='line'>674</span>     * @param {string} transactionId The transaction id of the purchase being consumed.
<span class='line'>675</span>     */</span><span class="WHIT">
<span class='line'>676</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onConsumePurchaseStarted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onConsumePurchaseStarted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>677</span> 
<span class='line'>678</span>     </span><span class="COMM">/**
<span class='line'>679</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the consume purchase operation has completed.
<span class='line'>680</span>     * @static
<span class='line'>681</span>     * @event
<span class='line'>682</span>     * @param {string} transactionId The transaction id of the consumed purchase.
<span class='line'>683</span>     */</span><span class="WHIT">
<span class='line'>684</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onConsumePurchaseCompleted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onConsumePurchaseCompleted"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> 
<span class='line'>685</span> 
<span class='line'>686</span> 	</span><span class="COMM">/**
<span class='line'>687</span>     * This {@link CocoonJS.EventHandler} object allows listening to events called when the consume purchase operation has failed.
<span class='line'>688</span>     * @static
<span class='line'>689</span>     * @event
<span class='line'>690</span>     * @param {string} transactionId The transaction id of the purchase that couldn't be consumed.
<span class='line'>691</span>     * @param {string} errorMessage The error message.
<span class='line'>692</span>     */</span><span class="WHIT">
<span class='line'>693</span> </span><span class="WHIT">	</span><span class="NAME">CocoonJS.Store.onConsumePurchaseFailed</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">CocoonJS.EventHandler</span><span class="PUNC">(</span><span class="STRN">"IDTK_SRV_STORE"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Store"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"onConsumePurchaseFailed"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>694</span> 
<span class='line'>695</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>